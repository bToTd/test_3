{"version":3,"sources":["StateMachine.js"],"names":["cc","Class","extends","Component","properties","onLoad","speed_x","speed_y","self","fsm","StateMachine","init","transitions","name","from","to","methods","onMvUp","console","log","moveUp","onMvRight","moveRight","onMvDown","moveDown","onMvLeft","moveLeft","onMvStop","moveStop","state","start","stop","error","up","down","right","left","update","dt","node","x","y"],"mappings":"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","file":"StateMachine.js","sourceRoot":"../../../../../assets/Scripts/test","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.speed_x = 1;\n        this.speed_y = 1;\n        let self = this;\n        let fsm = this.fsm = new StateMachine({\n            init: 'mvStop',\n            transitions: [\n              { name: 'right',  from: ['mvUp','mvStop'],       to: 'mvRight'   },\n              { name: 'left',   from: ['mvUp','mvStop'],       to: 'mvLeft'    },\n              { name: 'up',     from: ['mvRight','mvStop'],    to: 'mvUp'      },\n              { name: 'down',   from: ['mvRight','mvStop'],    to: 'mvDown'    },\n              { name: 'right',  from: ['mvDown','mvStop'],     to: 'mvRight'   },\n              { name: 'left',   from: ['mvDown','mvStop'],     to: 'mvLeft'    },\n              { name: 'up',     from: ['mvLeft','mvStop'],     to: 'mvUp'      },\n              { name: 'down',   from: ['mvLeft','mvStop'],     to: 'mvDown'    },\n              { name: 'stop',   from: '*',                     to: 'mvStop'    },\n            ],\n            methods: {\n              onMvUp: function() { console.log('this is mv up'); self.moveUp()},\n              onMvRight: function() { console.log('this is mv right');self.moveRight()},\n              onMvDown: function() { console.log('this is mv down');self.moveDown()},\n              onMvLeft: function() { console.log('this is mv left');self.moveLeft()},\n              onMvStop: function() { console.log('this is mv stop');self.moveStop()}\n            }\n        });\n        cc.log(`当前转态：${fsm.state}`);\n    },\n\n    start () {\n\n    },\n\n    moveUp(){\n        this.speed_y = 1;\n        this.speed_x = 0;\n    },\n    moveDown(){\n        this.speed_y = -1;\n        this.speed_x = 0;\n    },\n    moveRight(){\n        this.speed_x = 1;\n        this.speed_y = 0;\n    },\n    moveLeft(){\n        this.speed_x = -1;\n        this.speed_y = 0;\n    },\n    moveStop(){\n        this.speed_x = 0;\n        this.speed_y = 0;\n    },\n\n    stop(){\n        try {\n            this.fsm.stop();\n        } catch (error) {\n            console.log(\"不能转换状态\");\n        }\n    },\n\n    up(){\n        try {\n            this.fsm.up();  \n        } catch (error) {\n            console.log(\"不能转换\");\n        }\n    },\n    down(){\n        try {\n            this.fsm.down();\n        } catch (error) {\n            console.log(\"不能转换\");\n        }\n    },\n    right(){\n        try {\n            this.fsm.right();            \n        } catch (error) {\n            console.log(\"不能转换\");\n        }\n    },\n    left(){\n        try {\n            this.fsm.left(); \n        } catch (error) {\n            console.log(\"不能转换\"); \n        }\n    },\n    update (dt) {\n        this.node.x = this.node.x + this.speed_x;\n        this.node.y = this.node.y + this.speed_y;\n    },\n});\n"]}